{% extends 'base.html' %}
{% block title %}Hub{% endblock %}
{% block content %}
<div class="hub-wrapper">
  <div class="hub-container">
    <h1 class="hub-title">Üdv újra itt!</h1>
    <p class="hub-subtitle">Válassz, hogyan szeretnél folytatni</p>

    <!-- RANDOM QUESTION CARD -->
    <div class="random-card">
      <h2 class="random-card-title">Nézzük meg, mit kérdeznénk tőled most</h2>
      <button class="random-button" hx-get="/api/questions/random" hx-target="#random-question" hx-swap="innerHTML">
        Mutass kérdést
      </button>
    </div>

    <!-- HTMX Target for Random Question -->
    <div id="random-question" class="mt-4"></div>

    <!-- QUESTIONNAIRE GRID -->
    <h2 class="grid-title">Választható kérdőívek</h2>
    <div class="questionnaire-grid">
      {% for q in questionnaires %}
      <div class="card" data-slug="{{ q.id }}">
        <div class="card-inner">
          <div class="card-front card-color-{{ loop.index % 5 }}">
            <div class="card-header">
              <h3 class="card-title">{{ q.title }}</h3>
              <button class="info-button" onclick="flipCard('{{ q.id }}')">ℹ️</button>
            </div>
            <a href="/q/{{ q.id }}" class="card-link">Töltsd ki</a>
          </div>
          <div class="card-back">
            <p class="card-description">{{ q.description or "Nincs leírás." }}</p>
            <button class="back-button" onclick="flipCard('{{ q.id }}')">↩</button>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
</div>
{% if user.is_admin %}
<a href="/admin/q" class="fixed bottom-4 right-4 bg-blue-600 hover:bg-blue-700 text-white text-sm font-semibold py-2 px-4 rounded shadow">Kérdőívek szerkesztése</a>
{% endif %}
<link rel="stylesheet" href="/static/hub.css">
<script src="/static/hub.js" defer></script>
{% endblock %}